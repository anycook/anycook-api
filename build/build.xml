<?xml version = '1.0' encoding = 'utf-8'?> <!DOCTYPE project>

<project name="anycook-graph" default="dist" basedir="..">
	
	<!-- properties -->
	<property name="keeponly" value="de.anycook.**" />
	<property name="tomcat.lib" location="../../tomcat7/lib" />
	<property name="project.webxml" location="WebContent/WEB-INF/web.xml"/>

	<property name="anycook" location=".." />
	<property name="anycook.main" location="${anycook}/anycook-main" />
	<property name="build.sysclasspath" value="last" />
	<property name="thirdparty" location="../../thirdparty"/>
	<property name="thirdparty.jersey" location="${thirdparty}/thirdparty-jersey-1.13"/>
	<property name="thirdparty.jersey.contrib" location="${thirdparty.jersey}/contribs"/>
	<property name="thirdparty.log4j" location="${thirdparty}/thirdparty-apache-log4j-1.2.17"/>
	<property name="thirdparty.commons.lang3" location="${thirdparty}/thirdparty-apache-commons-lang3-3.1"/>
	<property name="thirdparty.commons.math3" location="${thirdparty}/thirdparty-apache-commons-math3-3.0"/>
	<property name="thirdparty.commons.dbcp" location="${thirdparty}/thirdparty-apache-commons-dbcp-1.4"/>
	<property name="thirdparty.commons.pool" location="${thirdparty}/thirdparty-apache-commons-pool-1.6"/>
	<property name="thirdparty.mysql.jdbc" location="${thirdparty}//thirdparty-mysql-connector-java-5.1.21"/>
	<property name="aitools3" location="../../aitools3"/>
	<property name="aitools3.check" location="${aitools3}/aitools3-aq-check"/>
	<!--<ant antfile="${anycook.build}" dir="${anycook}"/>-->

	<path id="sources">
	        <pathelement location="src" />
	</path>
	<path id="libraries">
		<fileset dir="${tomcat.lib}" includes="*.jar"/>
		<fileset dir="${thirdparty.log4j}" includes="*.jar"/>
		<fileset dir="${thirdparty.commons.lang3}" includes="*.jar"/>
		<fileset dir="${thirdparty.jersey}/lib" includes="*.jar"/>
		<fileset dir="${thirdparty.jersey.contrib}" includes="oauth*.jar"/>
	</path>
	
	<path id="dependencies">
		<pathelement location="${anycook.main}" />
	</path>
	
	<!-- upload war file to anycook.de -->
	<target name="upload" depends="dist">
		  <scp file="build/ROOT.war" todir="${user}@anycook.de:/usr/share/apache-tomcat-7.0.22/webapps/" password="${password}" />
	</target>
	
	<!-- distribution -->
	<target name="dist" depends="jar">
		<war destfile="build/ROOT.war" webxml="${project.webxml}">
            <lib dir="build">
                   <include name="anycook-graph.jar" />
            </lib>
			<lib dir="lib">
				<include name="aitools3-aq-check.jar" />
			</lib>
			<lib dir="${thirdparty.log4j}">
				<include name="*.jar" />
			</lib>
			<lib dir="${thirdparty.jersey}/lib">
				<include name="*.jar" />
			</lib>
			<lib dir="${thirdparty.commons.math3}">
				<include name="commons-math3-3.0.jar" />
			</lib>
			<lib dir="${thirdparty.commons.dbcp}">
				<include name="commons-dbcp-1.4.jar" />
			</lib>
			<lib dir="${thirdparty.commons.pool}">
				<include name="commons-pool-1.6.jar" />
			</lib>
			<lib dir="${thirdparty.mysql.jdbc}">
				<include name="mysql-connector-java-5.1.21-bin.jar" />
			</lib>
		</war>
		<!-- <delete dir="${project.build}" /> -->
	</target>

	<import file="${basedir}/../../code-generic/code-build/build-master.xml" />
</project>
